<beans:beans xmlns="http://www.springframework.org/schema/batch" 
     xmlns:beans="http://www.springframework.org/schema/beans"
     xmlns:batch="http://www.springframework.org/schema/batch" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
           http://www.springframework.org/schema/batch 
           http://www.springframework.org/schema/batch/spring-batch-3.0.xsd">
           
      
     <beans:import resource="SBatch-COP-00-Common.xml"/>
      
     <beans:bean id="copDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
		<beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<beans:property name="url" value="jdbc:mysql://localhost:3306/sbatch3-labs" />
		<beans:property name="username" value="root" />
		<beans:property name="password" value="stefan0" />
	</beans:bean>
      
   	<beans:bean id="bonificoPaymentByAmountSetter" class="corso.spring.batch.demo.cop.jdbc.BonificoQueryByAmountPsSetter" >
		<beans:property name="amount" value="100.0" /> <!--  value="#{jobParameters[amount]}"/> -->
	</beans:bean>
	
	<beans:bean id="bonificoInsertPsSetter" class="corso.spring.batch.demo.cop.jdbc.BonificoInsertPsSetter" />
	
	<beans:bean id="bonificoRowMapper" class="corso.spring.batch.demo.cop.jdbc.BonificoRowMapper"/>
      
    <beans:bean id="mioReader"
        class="org.springframework.batch.item.database.JdbcCursorItemReader">
        <beans:property name="dataSource" ref="copDataSource" />
        <beans:property name="sql" value="select * from payments where amount > ?" />
        <beans:property name="rowMapper" ref="bonificoRowMapper" />
        <beans:property name="preparedStatementSetter" ref="bonificoPaymentByAmountSetter" />
    </beans:bean>
             
    <beans:bean id="mioWriter" class="org.springframework.batch.item.database.JdbcBatchItemWriter">
		<beans:property name="dataSource" ref="copDataSource"/>
		<beans:property name="sql" 
		value="insert into Payments_Processed (orderId, payer, ibanPayer, beneficiary, ibanBeneficiary, amount, date, description, referenceNumber) values (?,?,?,?,?,?,?,?,?)" />
		<beans:property name="itemPreparedStatementSetter" ref="bonificoInsertPsSetter"/>
	</beans:bean>
	
                 
           
           
</beans:beans>